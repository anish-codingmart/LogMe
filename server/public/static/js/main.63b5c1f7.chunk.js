(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{202:function(e,t,a){e.exports=a(471)},207:function(e,t,a){},209:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},210:function(e,t,a){},466:function(e,t){},471:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(26),s=a.n(r),o=(a(207),a(9)),c=a(10),i=a(12),m=a(11),u=a(13),d=(a(209),a(210),a(472)),h=function(e){function t(){var e,a;Object(o.a)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"sidebar-container text-left"},n.a.createElement(d.a,{className:"route-links",to:"/admin"},n.a.createElement("p",{className:"sidebar-link"},"Visualize")),n.a.createElement(d.a,{className:"route-links",to:"/discover"},n.a.createElement("p",{className:"sidebar-link"},"Discover")),n.a.createElement(d.a,{className:"route-links",to:"/settings"},n.a.createElement("p",{className:"sidebar-link"},"Settings")))}}]),t}(l.Component),f=a(15),g=a(14),p=a.n(g),b=a(62),E=a(82),v=a(2),N=a.n(v),y=a(83),A=a.n(y),k=function(e){function t(e){var a,l;return Object(o.a)(this,t),(l=Object(i.a)(this,Object(m.a)(t).call(this,e))).state=(a={response:!1,endpoint:"http://127.0.0.1:4001",hits:[],hitsCount:0,totalHits:0,ticketsCount:0,lastWeekTotalHits:0,lastWeekBookingCount:0,lastWeekScheduleCount:0,lastWeekTicketsCount:0,liveStatus:!1,agentData:{datasets:[{data:[]}],labels:[]},urlData:{datasets:[{data:[]}],labels:[]},actionTypeData:{datasets:[{data:[]}],labels:[]},responseCodeData:{datasets:[{data:[]}],labels:[]},startDate:N()(),endDate:N()()},Object(f.a)(a,"response",[]),Object(f.a)(a,"refreshData",!1),a),l}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchQuery();var e=[1,2,3,4,5];this.setState({agentData:{datasets:[{data:e,backgroundColor:["#e74c3c","#2980b9","#f1c40f","#8e44ad","#2c3e50"]}],labels:[]},urlData:{datasets:[{data:e,backgroundColor:["#e74c3c","#2980b9","#f1c40f","#8e44ad","#2c3e50"]}],labels:[]},actionTypeData:{datasets:[{data:e,backgroundColor:["#e74c3c","#2980b9","#f1c40f","#8e44ad","#2c3e50"]}],labels:[]},responseCodeData:{datasets:[{data:e,backgroundColor:["#49DB2C","#2980b9","#f1c40f","#8e44ad","#2c3e50"]}],labels:[]}})}},{key:"refreshData",value:function(){var e=this;return setInterval(function(){e.state.refreshData&&e.fetchQuery()},2e3)}},{key:"goToDate",value:function(){this.fetchQuery()}},{key:"goLive",value:function(){var e=this;if(this.state.liveStatus)console.log("No Live"),clearInterval(this.state.refreshInterval),this.setState({liveStatus:!1,refreshData:!1});else{console.log("Going Live");var t=this.refreshData();this.setState({liveStatus:!0,startDate:N()(),endDate:N()(),refreshData:!0,refreshInterval:t}),setTimeout(function(){e.fetchQuery()},300)}}},{key:"fetchQuery",value:function(){var e=this;console.log("Fetching Query");var t=N()(this.state.startDate).startOf("day").utc().format(),a=N()(this.state.endDate).endOf("day").utc().format();console.log(t,a);var l={query:{bool:{filter:[{range:{timestamp:{gte:t,lte:a}}}]}},aggs:{spiderBotCount:{terms:{field:"spiderBot"}},urlCount:{terms:{field:"type"}},actionTypeCount:{terms:{field:"actionType"}},responseCodeCount:{terms:{field:"response"}}}};this.getLastWeeKLogs();var n={query:l,apiURL:"http://localhost:9200/logsindex/_search"};p.a.post("/get-elastic-search",n).then(function(t){console.log(t);var a=t.data.aggregations.spiderBotCount.buckets,l=t.data.aggregations.urlCount.buckets,n=t.data.aggregations.actionTypeCount.buckets,r=t.data.aggregations.responseCodeCount.buckets,s=[],o=[];a.map(function(e){s.push(e.doc_count),o.push(e.key)});var c=[],i=[];n.map(function(e){c.push(e.doc_count),i.push(e.key)});var m=[],u=[];r.map(function(e){m.push(e.doc_count),u.push(e.key)});var d=[],h=[],f=0,g=0;l.map(function(e){"schedule"==e.key&&(f=e.doc_count),"booking"==e.key&&(g=e.doc_count),d.push(e.doc_count),h.push(e.key)});var p=t.data.hits.total;e.setState({totalHits:p,scheduleCount:f,bookingCount:g}),e.getChartData(s,o,d,h,c,i,m,u)})}},{key:"downloadCSV",value:function(){console.log("Downloading CSV");var e={apiURL:"http://localhost:9200/logsindex/_search",query:{query:{bool:{filter:[{range:{timestamp:{gte:N()(this.state.startDate).startOf("day").utc().format(),lte:N()(this.state.endDate).endOf("day").utc().format()}}}]}},aggs:{spiderBotCount:{terms:{field:"spiderBot"}},urlCount:{terms:{field:"type"}},actionTypeCount:{terms:{field:"actionType"}},responseCodeCount:{terms:{field:"response"}}},size:1e4}};p.a.post("/download-csv",e).then(function(e){var t=e.data,a="Logs - "+N()().format("hh:mm A | DD-MM-YYYY")+".csv";A()(t,a,"text/csv")})}},{key:"getLastWeeKLogs",value:function(){var e=this,t=N()().subtract(1,"weeks").startOf("week").startOf("day").format(),a=N()().subtract(1,"weeks").endOf("week").endOf("day").format();this.setState({lastWeekStartDate:t,lastWeekEndDate:a});var l={query:{query:{bool:{filter:[{range:{timestamp:{gte:t,lte:a}}}]}},aggs:{spiderBotCount:{terms:{field:"spiderBot"}},urlCount:{terms:{field:"type"}},actionTypeCount:{terms:{field:"actionType"}}}},apiURL:"http://localhost:9200/logsindex/_search"};p.a.post("/get-elastic-search",l).then(function(t){console.log(t);var a=t.data.hits.total,l=t.data.aggregations.urlCount.buckets,n=0,r=0,s=0;l.map(function(e){"schedule"==e.key&&(n=e.doc_count),"booking"==e.key&&(r=e.doc_count),"tickets"==e.key&&(s=e.doc_count)}),e.setState({lastWeekTotalHits:a,lastWeekScheduleCount:n,lastWeekBookingCount:r,lastWeekTicketsCount:s})})}},{key:"getChartData",value:function(e,t,a,l,n,r,s,o){this.setState({agentData:{datasets:[{data:e}],labels:t},urlData:{datasets:[{data:a}],labels:l},actionTypeData:{datasets:[{data:n}],labels:r},responseCodeData:{datasets:[{data:s}],labels:o}})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.refreshInterval)}},{key:"render",value:function(){var e=this,t={annotation:{annotations:[{drawTime:"afterDatasetsDraw",borderColor:"red",borderDash:[2,2],borderWidth:2,mode:"vertical",type:"line",value:10,scaleID:"x-axis-0"}]},maintainAspectRation:!1};return n.a.createElement("div",{className:"main-admin-container container-fluid"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12 stat-section"},n.a.createElement("div",{className:"date-picker d-flex align-items-center justify-content-between"},n.a.createElement("h3",{className:"text-left"},"Dashboard"),n.a.createElement("div",{className:"date-picker"},n.a.createElement("button",{type:"button",onClick:function(){return e.goLive()},className:"btn margin-right "+(this.state.liveStatus?" btn-danger":"btn-secondary")},"Live"),n.a.createElement(E.DateRangePicker,{startDate:this.state.startDate,startDateId:"your_unique_start_date_id",endDate:this.state.endDate,endDateId:"your_unique_end_date_id",onDatesChange:function(t){var a=t.startDate,l=t.endDate;return e.setState({startDate:a,endDate:l})},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})},isOutsideRange:function(){return!1},minimumNights:0,displayFormat:function(){return"DD/MM/YYYY"}}),n.a.createElement("button",{type:"button",onClick:function(){return e.goToDate()},class:"btn btn-primary margin-left"},"Go"),n.a.createElement("br",null),n.a.createElement("p",{className:"text-right margin-default"},n.a.createElement("button",{type:"button",onClick:function(){return e.downloadCSV()},class:"btn btn-success margin-left"},"Download")))),n.a.createElement("hr",null),n.a.createElement("h4",{className:"text-left"},"Live Counter"),n.a.createElement("div",{className:"row d-flex justify-content-center"},n.a.createElement("div",{className:"col-md-2 live-counter-box bg-blue"},n.a.createElement("span",null,"Total Logs"),n.a.createElement("h4",null,this.state.totalHits)),n.a.createElement("div",{className:"col-md-2 live-counter-box bg-red"},n.a.createElement("span",null,"Schedule Count"),n.a.createElement("h4",null,this.state.scheduleCount)),n.a.createElement("div",{className:"col-md-2 live-counter-box bg-orange"},n.a.createElement("span",null,"Booking Count"),n.a.createElement("h4",null,this.state.bookingCount)),n.a.createElement("div",{className:"col-md-2 live-counter-box bg-green"},n.a.createElement("span",null,"Tickets Count"),n.a.createElement("h4",null,this.state.ticketsCount)),n.a.createElement("div",{className:"col-md-10"},n.a.createElement("hr",null),n.a.createElement("h5",{className:"text-center"},"Last Week"," ",n.a.createElement("span",{className:"text-x-small"},"(",N()(this.state.lastWeekStartDate).format("DD MMM YYYY")," ","-"," ",N()(this.state.lastWeekEndDate).format("DD MMM YYYY"),")"))),n.a.createElement("div",{className:"col-md-2 live-counter-box bg-grey"},n.a.createElement("span",null,"Last Week Logs"),n.a.createElement("h4",null,this.state.lastWeekTotalHits)),n.a.createElement("div",{className:"col-md-2 live-counter-box bg-purple"},n.a.createElement("span",null,"Booking Count"),n.a.createElement("h4",null,this.state.lastWeekBookingCount)),n.a.createElement("div",{className:"col-md-2 live-counter-box bg-turquoise"},n.a.createElement("span",null,"Schedule Count"),n.a.createElement("h4",null,this.state.lastWeekScheduleCount)),n.a.createElement("div",{className:"col-md-2 live-counter-box bg-komaru"},n.a.createElement("span",null,"Tickets Count"),n.a.createElement("h4",null,this.state.lastWeekTicketsCount)))),n.a.createElement("div",{className:"col-md-12 stat-section"},n.a.createElement("hr",null),n.a.createElement("h4",{className:"text-left"},"Visualize - Chart"),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-4 stat-section "},n.a.createElement("h5",null,"Spider Bot Stats"),n.a.createElement("br",null),n.a.createElement(b.b,{data:this.state.agentData,width:250,height:250,options:t})),n.a.createElement("div",{className:"col-md-4 stat-section "},n.a.createElement("h5",null,"URL Route Stats"),n.a.createElement("br",null),n.a.createElement(b.a,{data:this.state.urlData,width:250,height:250,options:t})),n.a.createElement("div",{className:"col-md-4 stat-section "},n.a.createElement("h5",null,"Response Type Stats"),n.a.createElement("br",null),n.a.createElement(b.b,{data:this.state.responseCodeData,width:250,height:250,options:t})),n.a.createElement("div",{className:"col-md-4 stat-section "},n.a.createElement("h5",null,"Action Type Stats"),n.a.createElement("br",null),n.a.createElement(b.b,{data:this.state.actionTypeData,width:250,height:250,options:t})))),n.a.createElement("br",null)))}}]),t}(l.Component),C=a(473),w=a(475),S=(l.Component,function(e){function t(){var e,a;Object(o.a)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},n.a.createElement("a",{className:"navbar-brand",href:"#"},"LogMe"),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},n.a.createElement("ul",{className:"navbar-nav ml-auto"},n.a.createElement("li",{className:"nav-item active"},n.a.createElement("a",{className:"nav-link",href:"#"},"Home ",n.a.createElement("span",{className:"sr-only"},"(current)"))))))}}]),t}(l.Component)),D=(a(415),a(474)),T=a(60),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){console.log(e.target.value);var t=e.target.value;a.setState({lateResponseThresholdLimit:t,currentPage:1}),setTimeout(function(){a.getLateResponseData(1)})},a.onUpdateSearch=a.onUpdateSearch.bind(Object(T.a)(Object(T.a)(a))),a.state={hits:[],lateResponseHits:[],lateResponseThresholdLimit:5e3,paginationLength:0,currentPage:1,startDate:N()(),endDate:N()()},a.getLateResponseData(a.state.currentPage),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onUpdateSearch",value:function(e){var t=this,a={apiURL:"http://localhost:9200/logsindex/_search?q="+e.target.value};p.a.post("/get-elastic-results",a).then(function(e){var a=e.data.hits.hits;console.log(e.data),console.log(a),a&&t.setState({hits:a,hitsCount:a.length})})}},{key:"goToNextPage",value:function(){console.log("Next Page");var e=this.state.currentPage;e<this.state.paginationLength&&(e+=1),this.getLateResponseData(e),this.setState({currentPage:e})}},{key:"goToPrevPage",value:function(){console.log("Prev Page");var e=this.state.currentPage;e>1&&(e-=1),this.getLateResponseData(e),this.setState({currentPage:e})}},{key:"goToDate",value:function(){console.log(this.state),this.getLateResponseData(1)}},{key:"downloadCSV",value:function(){if(this.state.lateResponseHitsCount>1){console.log("Downloading CSV");var e=N()(this.state.startDate).startOf("day").utc().format(),t=N()(this.state.endDate).endOf("day").utc().format(),a={apiURL:"http://localhost:9200/logsindex/_search",query:{sort:{timestamp:"asc"},query:{bool:{filter:{bool:{must:{range:{responseTime:{gte:this.state.lateResponseThresholdLimit}}},should:{range:{timestamp:{gte:e,lte:t}}}}}}},size:1e4}};p.a.post("/download-csv",a).then(function(e){var t=e.data,a="Logs - "+N()().format("hh:mm A | DD-MM-YYYY")+".csv";A()(t,a,"text/csv")})}else alert("No Hits Found")}},{key:"getLateResponseData",value:function(e){var t=this,a=N()(this.state.startDate).startOf("day").utc().format(),l=N()(this.state.endDate).endOf("day").utc().format(),n=10*e,r={apiURL:"http://localhost:9200/logsindex/_search",query:{sort:{timestamp:"asc"},query:{bool:{filter:{bool:{must:{range:{responseTime:{gte:this.state.lateResponseThresholdLimit}}},should:{range:{timestamp:{gte:a,lte:l}}}}}}},size:10,from:n}};p.a.post("/get-elastic-search",r).then(function(e){var a=e.data.hits.hits,l=e.data.hits.total,n=Math.round(l/10);console.log("Total",l,n),console.log(e.data),console.log(a),a&&t.setState({lateResponseHits:a,lateResponseHitsCount:l,paginationLength:n})})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"main-admin-container container-fluid"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12 stat-section"},n.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},n.a.createElement("h3",{className:"text-left"},"Late Responses"),n.a.createElement("div",{className:"date-picker"},n.a.createElement(E.DateRangePicker,{startDate:this.state.startDate,startDateId:"your_unique_start_date_id",endDate:this.state.endDate,endDateId:"your_unique_end_date_id",onDatesChange:function(t){var a=t.startDate,l=t.endDate;return e.setState({startDate:a,endDate:l})},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})},isOutsideRange:function(){return!1},minimumNights:0,displayFormat:function(){return"DD/MM/YYYY"}}),n.a.createElement("button",{type:"button",onClick:function(){return e.goToDate()},class:"btn btn-primary margin-left"},"Go"))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",{class:"form-group d-flex flex-row align-items-center"},n.a.createElement("label",{for:"inputPassword",class:"col-4 col-form-label"},"Late Response Limit"),n.a.createElement("div",{class:"col-4 d-flex align-items-center"},n.a.createElement("input",{class:"form-control",name:"lateResponseThresholdLimit",placeholder:"lateResponseThresholdLimit",value:this.state.lateResponseThresholdLimit,onChange:this.handleChange,type:"number"})),n.a.createElement("div",{className:"button-div col-4"},n.a.createElement("button",{type:"button",onClick:function(){return e.downloadCSV()},class:"btn btn-primary margin-left "},"Download CSV"))),n.a.createElement("br",null),n.a.createElement("table",{className:"table "},n.a.createElement("thead",{className:"thead-dark"},n.a.createElement("tr",null,n.a.createElement("th",null,"Timestamp"),n.a.createElement("th",null,"Client"),n.a.createElement("th",null,"Response Code"),n.a.createElement("th",null,"Response Time"),n.a.createElement("th",null,"URL"))),n.a.createElement("tbody",null,this.state.lateResponseHits.map(function(e,t){return n.a.createElement("tr",{className:"animated bounceInUp",key:e._id},n.a.createElement("td",null,N()(e._source.timestamp).utcOffset("+05:30").format("DD-MM-YYYY | hh:mm A")),n.a.createElement("td",null,e._source.client),n.a.createElement("td",null,e._source.response),n.a.createElement("td",null,e._source.responseTime?e._source.responseTime:e._source.request),n.a.createElement("td",{className:"word-break"},e._source.url))}))),n.a.createElement("div",{className:"pagination d-flex justify-content-center "+(this.state.paginationLength>1?"":"hidden")},n.a.createElement("nav",{"aria-label":"Page navigation example "},n.a.createElement("ul",{class:"pagination "},n.a.createElement("li",{class:"page-item"},n.a.createElement("a",{class:"page-link",onClick:function(){return e.goToPrevPage()}},"Previous"))," ",n.a.createElement("li",{class:"page-item"},n.a.createElement("a",{class:"page-link"},this.state.currentPage," /"," ",this.state.paginationLength)),n.a.createElement("li",{class:"page-item"},n.a.createElement("a",{class:"page-link",onClick:function(){return e.goToNextPage()}},"Next")))))),n.a.createElement("div",{className:"col-md-12 stat-section"},n.a.createElement("h3",{className:"text-left"},"Discover"),n.a.createElement("br",null),n.a.createElement("div",{class:"form-group"},n.a.createElement("input",{name:"search",placeholder:"Search Now",onChange:this.onUpdateSearch,type:"text",className:"form-control"})),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("p",null,this.state.hitsCount," Hits"),n.a.createElement("table",{className:"table "},n.a.createElement("thead",{className:"thead-dark"},n.a.createElement("tr",null,n.a.createElement("th",null,"Timestamp"),n.a.createElement("th",null,"Client"),n.a.createElement("th",null,"Agent"),n.a.createElement("th",null,"Method"),n.a.createElement("th",null,"URL"),n.a.createElement("th",null,"Response Code"))),n.a.createElement("tbody",null,this.state.hits.map(function(e,t){return n.a.createElement("tr",{className:"animated bounceInUp",key:e._id},n.a.createElement("td",null,N()(e._source.timestamp).utcOffset("+05:30").format("hh:mm A | DD-MM-YYYY")),n.a.createElement("td",null,e._source.client),n.a.createElement("td",{className:"word-break"},e._source.agent),n.a.createElement("td",null,e._source.method),n.a.createElement("td",{className:"word-break"},e._source.url),n.a.createElement("td",null,e._source.response))}))))," "))}}]),t}(l.Component),x=a(17),R=a(61),L=a(86),j=a.n(L),M=a(200),V=a.n(M),F=function(e){function t(){var e,a;Object(o.a)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={submitOK:!0,formErrors:[],fieldTypesList:[{fieldTypeName:"All Logs",fieldTypeValue:"allLogs",fieldNames:[{fieldName:"allLogs",fieldValue:"allLogs"}]},{fieldTypeName:"Route Type",fieldTypeValue:"type",fieldNames:[{fieldName:"Booking",fieldValue:"booking"},{fieldName:"Schedule",fieldValue:"schedule"},{fieldName:"Tickets",fieldValue:"tickets"}]},{fieldTypeName:"Action Type",fieldTypeValue:"actionType",fieldNames:[{fieldName:"Route",fieldValue:"route"},{fieldName:"PNR Status",fieldValue:"pnrStatus"},{fieldName:"Check In",fieldValue:"checkIn"},{fieldName:"Customer Support",fieldValue:"customerSupport"},{fieldName:"Baggages",fieldValue:"baggages"},{fieldName:"Domestic Airlines",fieldValue:"domesticAirlines"},{fieldName:"International Airlines",fieldValue:"internationalAirlines"},{fieldName:"Domestic Airports",fieldValue:"domesticAirports"},{fieldName:"International Airports",fieldValue:"internationalAirports"}]},{fieldTypeName:"Spider Bot",fieldTypeValue:"spiderBot",fieldNames:[{fieldName:"Google Bot",fieldValue:"Googlebot"},{fieldName:"Bingbot",fieldValue:"bingbot"},{fieldName:"Duck Duck Bot",fieldValue:"DuckDuckBot"},{fieldName:"Baiduspider",fieldValue:"Baiduspider"},{fieldName:"YandexBot",fieldValue:"YandexBot"},{fieldName:"Facebook Hit",fieldValue:"facebookexternalhit"},{fieldName:"DotBot",fieldValue:"DotBot"},{fieldName:"SemrushBot",fieldValue:"SemrushBot"},{fieldName:"AhrefsBot",fieldValue:"AhrefsBot"},{fieldName:"AdsBotGoogle",fieldValue:"AdsBotGoogle"}]}],alertOperators:[{operatorName:"Greater Than",operatorValue:">"},{operatorName:"Lesser Than",operatorValue:"<"},{operatorName:"Equal",operatorValue:"=="}],alertRange:[{rangeName:"Second",rangeMetric:"seconds"},{rangeName:"Minute",rangeMetric:"minutes"},{rangeName:"Hour",rangeMetric:"hours"},{rangeName:"Day",rangeMetric:"days"},{rangeName:"Month",rangeMetric:"months"},{rangeName:"Year",rangeMetric:"Years"}],fieldNames:[],newAlert:{alertEmailAddressArray:[{email:"testemailcodingmart@gmail.com"}],alertMobileNumberArray:[{mobile:""}],alertMobileNumberFlag:!1,alertName:"",alertFrequency:"1000",alertFieldType:"type",alertFieldName:"booking",alertOperator:">",alertThresholdLimit:"",alertRangeValue:"5",alertRangeMetric:"seconds",alertState:!0},alertRules:[]},a.handleChange=function(e){var t=a.state.newAlert;t[e.target.name]=e.target.value,a.setState({newAlert:t}),console.log(a.state.newAlert)},a.handleShareholderNameChange=function(e){return function(t){var l=a.state.newAlert.alertEmailAddressArray.map(function(a,l){return e!==l?a:Object(x.a)({},a,{email:t.target.value})});a.setState({newAlert:Object(x.a)({},a.state.newAlert,{alertEmailAddressArray:l})})}},a.handleRemoveShareholder=function(e){return function(){var t=a.state.newAlert.alertEmailAddressArray.filter(function(t,a){return e!==a});a.setState({newAlert:Object(x.a)({},a.state.newAlert,{alertEmailAddressArray:t})})}},a.handleShareholderNameChangeNumber=function(e){return function(t){var l=a.state.newAlert.alertMobileNumberArray.map(function(a,l){return e!==l?a:Object(x.a)({},a,{mobile:t.target.value})});a.setState({newAlert:Object(x.a)({},a.state.newAlert,{alertMobileNumberArray:l})})}},a.handleRemoveShareholderNumber=function(e){return function(){var t=a.state.newAlert.alertMobileNumberArray.filter(function(t,a){return e!==a});a.setState({newAlert:Object(x.a)({},a.state.newAlert,{alertMobileNumberArray:t})})}},a.formValidation=function(){console.log("Form Validation");var e=a.state.newAlert.alertName,t=a.state.newAlert.alertThresholdLimit,l=a.state.newAlert.alertMobileNumberArray,n=a.state.newAlert.alertRangeValue,r=a.state.formErrors;""==e&&(r.push("Enter the Name of the Alert"),a.setState({formErrors:r}),a.setState({submitOK:!1})),""==t&&(r.push("Enter the Threshold Value"),a.setState({formErrors:r}),a.setState({submitOK:!1})),""==n&&(r.push("Enter the Range Value"),a.setState({formErrors:r}),a.setState({submitOK:!1})),a.state.newAlert.alertMobileNumberFlag&&l.forEach(function(e){console.log(e.mobile),(isNaN(e.mobile)||e.mobile<1e9||e.mobile>9999999999)&&(r.push("Mobile Number is Not Valid"),a.setState({formErrors:r}),a.setState({submitOK:!1}))}),setTimeout(function(){console.log(a.state.submitOK),console.log(a.state.formErrors)},1e3)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getAlertRules(),this.setFieldNames()}},{key:"setFieldNames",value:function(){this.handleFieldTypeChange({target:{value:"type"}})}},{key:"handleFieldTypeChange",value:function(e){var t=this;console.log(e.target.value);var a=e.target.value,l=this.state.fieldTypesList.find(function(e){return e.fieldTypeValue===a});this.setState({newAlert:Object(x.a)({},this.state.newAlert,{alertFieldType:a}),fieldNames:l.fieldNames}),setTimeout(function(){console.log(t.state.fieldNames)})}},{key:"handleAddShareholder",value:function(){var e=this.state.newAlert.alertEmailAddressArray.concat([{email:""}]);console.log(e),this.setState({newAlert:Object(x.a)({},this.state.newAlert,{alertEmailAddressArray:e})})}},{key:"handleMobileNumberFlag",value:function(e){console.log(e),e?this.setState({newAlert:Object(x.a)({},this.state.newAlert,{alertMobileNumberFlag:!0})}):this.setState({newAlert:Object(x.a)({},this.state.newAlert,{alertMobileNumberFlag:!1})})}},{key:"handleAddShareholderNumber",value:function(){var e=this.state.newAlert.alertMobileNumberArray.concat([{mobile:""}]);console.log(e),this.setState({newAlert:Object(x.a)({},this.state.newAlert,{alertMobileNumberArray:e})})}},{key:"getAlertRules",value:function(){var e=this;p.a.get("/get-alert-rules").then(function(t){var a=t.data.alertRules;console.log(a),e.setState({alertRules:a})})}},{key:"addNewAlert",value:function(){var e=this,t=this.state.formErrors;t.splice(0,t.length),this.setState({submitOK:!0,formErrors:t}),console.log(this.state.formErrors),this.formValidation(),console.log(this.state.newAlert);var a=this.state.newAlert.alertFrequency,l=this.state.newAlert.alertRangeValue;this.setState({newAlert:Object(x.a)({},this.state.newAlert,{alertFrequency:parseInt(a),alertRangeValue:parseInt(l),alertState:!0})}),setTimeout(function(){e.state.submitOK&&p.a.post("/add-alert-rules",e.state.newAlert).then(function(t){console.log(t.data),e.getAlertRules(),e.clearFields(),j.a.fire("Job Added Succesfully","Your job has been started","success")})},1e3)}},{key:"clearFields",value:function(){this.setState({newAlert:{alertEmailAddressArray:[{email:"testemailcodingmart@gmail.com"}],alertMobileNumberArray:[{mobile:""}],alertMobileNumberFlag:!1,alertName:"",alertFrequency:"1000",alertFieldType:"type",alertFieldName:"booking",alertOperator:">",alertThresholdLimit:"",alertRangeValue:"5",alertRangeMetric:"seconds",alertState:!0}})}},{key:"updateAlertState",value:function(e){var t=this;console.log(e.alertName);var a={alertUid:e.alertUid,alertState:e.alertState};p.a.post("/update-alert-state",a).then(function(e){console.log(e.data),t.getAlertRules()}),console.log(a)}},{key:"deleteAlertState",value:function(e){var t=this,a={alertUid:e.alertUid};j.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(e){e.value&&(p.a.post("/delete-alert-state",a).then(function(e){console.log(e.data),j.a.fire("Deleted!","Job has been deleted.","success"),t.getAlertRules()}),console.log(a))}),console.log(e.alertName)}},{key:"render",value:function(){var e,t,a,l,r=this;return n.a.createElement("div",{className:"stat-section"},n.a.createElement("h5",{className:"text-left"},"Alert System"),n.a.createElement("br",null),n.a.createElement("div",{className:"alert-section"},n.a.createElement("h6",null,"Alert Jobs"),n.a.createElement("br",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("div",{class:"table-responsive"},n.a.createElement("table",{class:"table"},n.a.createElement("thead",{class:"thead-dark"},n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"#"),n.a.createElement("th",{scope:"col"},"Name"),n.a.createElement("th",{scope:"col"},"Field Name"),n.a.createElement("th",{scope:"col"},"Operator"),n.a.createElement("th",{scope:"col"},"Threshold"),n.a.createElement("th",{scope:"col"},"Frequency"),n.a.createElement("th",{scope:"col"},"State"),n.a.createElement("th",{scope:"col"},"Action"))),n.a.createElement("tbody",null,this.state.alertRules.map(function(e,t){return n.a.createElement("tr",null,n.a.createElement("td",null,t+1),n.a.createElement("td",null,e.alertName),n.a.createElement("td",null,e.alertFieldName),n.a.createElement("td",null,e.alertOperator),n.a.createElement("td",null,e.alertThresholdLimit),n.a.createElement("td",null,e.alertFrequency),n.a.createElement("td",null,n.a.createElement("button",{type:"button",onClick:function(){return r.updateAlertState(e)},className:"btn margin-right "+(e.alertState?" btn-success":"btn-warning")},e.alertState?"Active":"Not Active")),n.a.createElement("td",null,n.a.createElement("button",{type:"button",onClick:function(){return r.deleteAlertState(e)},className:"btn margin-right btn-danger"},"Delete Job")))}))))))),n.a.createElement("br",null),n.a.createElement("div",{className:"alert-section"},n.a.createElement("h6",null,"Add a New Alert System"),n.a.createElement("br",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"form-group row col-6"},n.a.createElement("label",{for:"logsThresholdLimit",className:"col-6 col-form-label"},"Name of the Alert System"),n.a.createElement("div",{class:"col-6"},n.a.createElement("input",{type:"text",className:"form-control",id:"logsThresholdLimit",placeholder:"Name of the Alert System",name:"alertName",value:this.state.newAlert.alertName,onChange:function(e){return r.handleChange(e)}}))),n.a.createElement("div",{className:"form-group row col-6"},n.a.createElement("label",{for:"logsThresholdLimit",className:"col-6 col-form-label"},"Frequency"),n.a.createElement("div",{class:"col-6"},n.a.createElement("select",(e={value:"5",name:"alertFrequency"},Object(f.a)(e,"value",this.state.newAlert.alertFrequency),Object(f.a)(e,"onChange",function(e){return r.handleChange(e)}),Object(f.a)(e,"class","custom-select"),e),n.a.createElement("option",{value:"1000"},"Every Second"),n.a.createElement("option",{value:"300000"},"5 Minutes"),n.a.createElement("option",{value:"1800000"},"30 Minutes"),n.a.createElement("option",{value:"3600000"},"1 Hour"),n.a.createElement("option",{value:"86400000"},"1 Day")))),n.a.createElement("div",{className:"col-md-12 alert-box"},n.a.createElement("hr",null),n.a.createElement("h6",{className:"text-left"},"Match the Following Condition"),n.a.createElement("br",null),n.a.createElement("div",{className:"row text-left"},n.a.createElement("div",{className:"col-6"},n.a.createElement("div",{class:"form-group"},n.a.createElement("label",{for:"formGroupExampleInput"},"Select Field Type"),n.a.createElement("select",{value:this.state.newAlert.alertFieldType,onChange:function(e){return r.handleFieldTypeChange(e)},class:"custom-select"},this.state.fieldTypesList.map(function(e){return n.a.createElement("option",{value:e.fieldTypeValue},e.fieldTypeName)})))),n.a.createElement("br",null),n.a.createElement("div",{className:"col-6"},n.a.createElement("div",{class:"form-group"},n.a.createElement("label",{for:"formGroupExampleInput"},"Select Field Name"),n.a.createElement("select",(t={value:"5",class:"custom-select",name:"alertFieldName"},Object(f.a)(t,"value",this.state.newAlert.alertFieldName),Object(f.a)(t,"onChange",function(e){return r.handleChange(e)}),t),this.state.fieldNames.map(function(e){return n.a.createElement("option",{value:e.fieldValue},e.fieldName)}),"event"))),n.a.createElement("div",{className:"col-4"},n.a.createElement("div",{class:"form-group"},n.a.createElement("label",{for:"formGroupExampleInput"},"Compare"),n.a.createElement("select",(a={value:"5",class:"custom-select",name:"alertOperator"},Object(f.a)(a,"value",this.state.newAlert.alertOperator),Object(f.a)(a,"onChange",function(e){return r.handleChange(e)}),a),this.state.alertOperators.map(function(e){return n.a.createElement("option",{value:e.operatorValue},e.operatorName)})))),n.a.createElement("div",{className:"col-4"},n.a.createElement("div",{class:"form-group"},n.a.createElement("label",{for:"formGroupExampleInput"},"Threshold Value"),n.a.createElement("input",{type:"number",className:"form-control",id:"logsThresholdLimit",name:"alertThresholdLimit",value:this.state.newAlert.alertThresholdLimit,onChange:function(e){return r.handleChange(e)},placeholder:"Threshold Value"}))),n.a.createElement("div",{className:"col-4"},n.a.createElement("label",{for:"formGroupExampleInput"},"Range (i.e Last 5 Minutes)"),n.a.createElement("div",{className:"row"},n.a.createElement("input",{type:"number",className:"form-control col-6",id:"logsThresholdLimit",placeholder:"Value",name:"alertRangeValue",value:this.state.newAlert.alertRangeValue,onChange:function(e){return r.handleChange(e)}}),n.a.createElement("div",{className:"col-6"},n.a.createElement("select",(l={value:"5",name:"alertRangeMetric"},Object(f.a)(l,"value",this.state.newAlert.alertRangeMetric),Object(f.a)(l,"onChange",function(e){return r.handleChange(e)}),Object(f.a)(l,"class","custom-select"),l),this.state.alertRange.map(function(e){return n.a.createElement("option",{value:e.rangeMetric},e.rangeName)}))))))),n.a.createElement("div",{className:"col-md-12 alert-box"},n.a.createElement("hr",null),n.a.createElement("h6",{className:"text-left"},"Alert Notifications"),n.a.createElement("br",null),n.a.createElement("div",{className:"form-group row text-left"},n.a.createElement("label",{for:"emailAddress",className:"col-4 col-form-label"},"Email Addresss"),n.a.createElement("div",{class:"col-8"},this.state.newAlert.alertEmailAddressArray.map(function(e,t){return n.a.createElement("div",{className:"d-flex flex-row align-items-center"},n.a.createElement("input",{type:"text",placeholder:"Enter #".concat(t+1," Email Address"),value:e.email,onChange:r.handleShareholderNameChange(t),className:"form-control",id:"emailAddress"}),n.a.createElement("button",{type:"button",onClick:r.handleRemoveShareholder(t),className:"btn-danger btn margin-left"},"-"),n.a.createElement("br",null)," ",n.a.createElement("br",null))}),n.a.createElement("br",null),n.a.createElement("button",{type:"button",onClick:function(){return r.handleAddShareholder()},className:"btn-primary btn"},"Add New Email Address"))),n.a.createElement("hr",null),n.a.createElement("br",null),n.a.createElement("div",{className:"form-group row text-left"},n.a.createElement("div",{className:"col-4"},n.a.createElement("label",{for:"mobileNumber",className:"col-form-label"},"Mobile Number"),n.a.createElement("br",null),n.a.createElement(V.a,{onChange:function(e){return r.handleMobileNumberFlag(e)},name:"alertMobileNumberFlag",checked:this.state.newAlert.alertMobileNumberFlag,id:"normal-switch"})),n.a.createElement("div",{style:this.state.newAlert.alertMobileNumberFlag?{}:{display:"none"},class:"col-8"},this.state.newAlert.alertMobileNumberArray.map(function(e,t){return n.a.createElement("div",{className:"d-flex flex-row align-items-center"},n.a.createElement("input",{type:"number",placeholder:"Enter #".concat(t+1," Mobile Number"),value:e.mobile,onChange:r.handleShareholderNameChangeNumber(t),className:"form-control",id:"mobileNumber"}),n.a.createElement("button",{type:"button",onClick:r.handleRemoveShareholderNumber(t),className:"btn-danger btn margin-left"},"-"),n.a.createElement("br",null)," ",n.a.createElement("br",null))}),n.a.createElement("br",null),n.a.createElement("button",{type:"button",onClick:function(){return r.handleAddShareholderNumber()},className:"btn-primary btn"},"Add New Mobile Number")))),n.a.createElement("hr",null),n.a.createElement("div",{className:"text-center col-md-12"},n.a.createElement("div",{style:this.state.formErrors.length>0?{}:{display:"none"},className:"form-errors-box"},this.state.formErrors.map(function(e){return n.a.createElement("p",null,e)})),n.a.createElement("button",{type:"button",onClick:function(){return r.addNewAlert()},className:"btn btn-primary update-btn bg-grey "},"Add New Alert")))))}}]),t}(l.Component),_=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).state={alertEmailAddressArray:[{email:"logs@codingmart.com"}]},e.handleShareholderNameChange=function(t){return function(a){var l=e.state.alertEmailAddressArray.map(function(e,l){return t!==l?e:Object(x.a)({},e,{email:a.target.value})});e.setState({alertEmailAddressArray:l})}},e.handleRemoveShareholder=function(t){return function(){e.setState({alertEmailAddressArray:e.state.alertEmailAddressArray.filter(function(e,a){return t!==a})})}},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"alertEmailAddressInput",value:function(e){this.setState({alertEmailAddress:e.target.value})}},{key:"logsThresholdCountInput",value:function(e){this.setState({logsThresholdCount:parseInt(e.target.value)})}},{key:"updateSettings",value:function(){var e=this;console.log(this.state),p.a.post("http://localhost:3300/update-settings",this.state).then(function(t){console.log(t),e.alertToast()})}},{key:"alertToast",value:function(){console.log("Alerting Toast"),R.toast.success("\ud83e\udd84 Settings Updated",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}},{key:"getSettingsData",value:function(){var e=this;p.a.get("/settings").then(function(t){console.log(t.data);var a=t.data;console.log(a),e.setState(a)})}},{key:"handleAddShareholder",value:function(){var e=this.state.alertEmailAddressArray.concat([{email:""}]);console.log(e),this.setState({alertEmailAddressArray:e})}},{key:"render",value:function(){return n.a.createElement("div",{className:"main-admin-container container-fluid"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12 stat-section"},n.a.createElement("h3",{className:"text-left"},"Settings"),n.a.createElement(F,null))))}}]),t}(l.Component),B=(a(439),a(201)),Y=a.n(B),I=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.state={response:!1,endpoint:"http://127.0.0.1:4001"}}},{key:"initSocketIO",value:function(){var e=this,t=this.state.endpoint;Y()(t).on("alertThresholdLimit",function(t){console.log(t),e.alertToast()})}},{key:"alertToast",value:function(){console.log("Alerting Toast"),R.toast.warn("\ud83e\udd84 Log Threshold Limit Alert!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(S,null),n.a.createElement(C.a,null,n.a.createElement("div",{className:"container-fluid"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-2 padding-none"},n.a.createElement(h,null)),n.a.createElement("div",{className:"col-md-10 main-container"},n.a.createElement(D.a,null,n.a.createElement(w.a,{exact:!0,path:"/admin",component:k}),n.a.createElement(w.a,{exact:!0,path:"/discover",component:O}),n.a.createElement(w.a,{exact:!0,path:"/settings",component:_}),n.a.createElement(w.a,{path:"/",component:k})),n.a.createElement(R.ToastContainer,null))))))}}]),t}(l.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(469);s.a.render(n.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[202,2,1]]]);
//# sourceMappingURL=main.63b5c1f7.chunk.js.map